<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>Vue Tree Example</title>
</head>
<body>

<button v-on="click: change"> Change Data</button>

<!--Set the template element to be hidden so it doesn't show up in the DOM-->
<div class="hidden" id="tree-template">
    <div>
        People
        <div v-repeat="person: people">

            <!--Using a text node to set the text property-->
            {{person.name}}

            <!--Using a data-attribute to set the text property-->
            <div data-text="Tags">
                <!--Using a data-attribute to set the icon property-->
                <div data-icon="glyphicon glyphicon-leaf" v-repeat="person.tags">{{$value}}</div>
            </div>

            <div data-text="Friends">

                <!--Using data-jstree to disable the node-->
                <div data-jstree='{"disabled": true}' data-icon="glyphicon glyphicon-leaf"
                     v-repeat="friend: person.friends">{{friend.name}}
                </div>
            </div>

            <div data-text="Age">
                <!--Using a data-jstree attribute to set the icon-->
                <div data-jstree='{"icon": "glyphicon glyphicon-leaf"}'>{{person.age}}</div>
            </div>

            <div data-text="Gender">
                <div data-disabled="true" data-icon="glyphicon glyphicon-leaf">{{person.gender}}</div>
            </div>
        </div>
    </div>
</div>

<!--The element that will recieve the jsTree-->
<div id="js-tree"></div>

<!--Dependencies-->
<script src="http://code.jquery.com/jquery-1.11.2.min.js"></script>
<!--<script src="http://cdnjs.cloudflare.com/ajax/libs/jstree/3.0.9/jstree.min.js"></script>-->
<script src="jstree.js"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/vue/0.11.4/vue.min.js"></script>
<link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/jstree/3.0.9/themes/default/style.min.css">
<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">

<!--And the plugin itself-->
<script src="../src/jsTreeBind.js"></script>

<script>
    $(function () {
        var temp = [];

        //Get the JSON data
        $.ajax({
            dataType: "json",
            url: "sample.json",
            mimeType: "application/json"
        }).then(function (data) {

            //Add the first sample and request the second
            temp.push(data);
            return $.ajax({
                dataType: "json",
                url: "sample2.json",
                mimeType: "application/json"
            });
        }).then(function (data) {

            //Add the second sample
            temp.push(data);

            //Create the Vue instance
            window.vm = new Vue({
                el: "html",
                data: {
                    samples: temp
                },
                computed: {
                    people: function () {
                        return this.samples[0];
                    }
                },
                methods: {
                    change: function (e) {
                        this.samples.reverse();
                    }
                }
            });

            //Set up the adaptor
            $("#js-tree").jstreeBind("#tree-template");
        });
    });

</script>
</body>
</html>